<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—°êµ¬ì†Œ ìƒ˜í”Œ í• ë‹¹ ìŠ¤ì¼€ì¤„ ì‹œìŠ¤í…œ (Firebase)</title>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #1a73e8;
            text-align: center;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .subtitle {
            text-align: center;
            color: #5f6368;
            margin-bottom: 30px;
            font-size: 16px;
        }
        
        .firebase-status {
            text-align: center;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .firebase-connected {
            background: #e8f5e8;
            color: #2e7d32;
        }
        
        .firebase-disconnected {
            background: #ffebee;
            color: #c62828;
        }
        
        .firebase-loading {
            background: #fff3cd;
            color: #e65100;
        }
        
        .mode-selector {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .mode-btn {
            padding: 12px 24px;
            margin: 0 10px;
            border: 2px solid #1a73e8;
            background: white;
            color: #1a73e8;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .mode-btn.active {
            background: #1a73e8;
            color: white;
        }
        
        .admin-only {
            display: none;
        }
        
        .admin-mode .admin-only {
            display: block;
        }
        
        .tab-container {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 14px;
            font-weight: bold;
            color: #5f6368;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            margin: 0 5px 10px 5px;
        }
        
        .tab.active {
            color: #1a73e8;
            border-bottom-color: #1a73e8;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #5f6368;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #1a73e8;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ê·¸ë£¹ ì •ë³´ */
        .group-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .group-card {
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .group-card h3 {
            margin: 0 0 8px 0;
            font-size: 16px;
        }
        
        .group-card .max-count {
            font-size: 24px;
            font-weight: bold;
            margin: 5px 0;
        }
        
        .group-card .label {
            font-size: 12px;
            opacity: 0.9;
        }
        
        /* ìº˜ë¦°ë” ìŠ¤íƒ€ì¼ */
        .monthly-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .month-container {
            border: 1px solid #dadce0;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .month-header {
            background: #4285f4;
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: bold;
            font-size: 18px;
        }
        
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
        }
        
        .day-header {
            background: #f1f3f4;
            padding: 8px;
            text-align: center;
            font-weight: bold;
            font-size: 12px;
            border-bottom: 1px solid #dadce0;
        }
        
        .day-cell {
            min-height: 80px;
            border: 1px solid #e8eaed;
            padding: 4px;
            font-size: 11px;
            position: relative;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .day-cell:hover {
            background-color: #f8f9fa;
        }
        
        .day-number {
            font-weight: bold;
            margin-bottom: 3px;
        }
        
        .group-samples {
            margin-bottom: 2px;
        }
        
        .group-tag {
            display: inline-block;
            padding: 1px 4px;
            border-radius: 8px;
            font-size: 9px;
            color: white;
            margin-right: 2px;
            margin-bottom: 1px;
        }
        
        .weekend {
            background: #f5f5f5;
            color: #9e9e9e;
        }
        
        .holiday {
            background: #f5f5f5; /* Changed to match weekend background */
            color: #d32f2f;    /* Keep red text for distinction */
        }
        
        .vacation {
            background: #fff3e0;
        }
        
        /* í• ë‹¹ ê´€ë¦¬ ìŠ¤íƒ€ì¼ */
        .allocation-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .allocation-section h3 {
            color: #1a73e8;
            margin-top: 0;
            margin-bottom: 15px;
        }
        
        .date-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .allocation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .analyst-allocation {
            background: white;
            border: 1px solid #dadce0;
            border-radius: 8px;
            padding: 15px;
        }
        
        .analyst-allocation h4 {
            margin-top: 0;
            margin-bottom: 15px;
            color: #1a73e8;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .group-allocation {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .group-row {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .group-label {
            min-width: 80px;
            padding: 5px 10px;
            border-radius: 15px;
            color: white;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
        }
        
        .group-input {
            width: 60px;
            padding: 5px;
            border: 1px solid #dadce0;
            border-radius: 4px;
            text-align: center;
        }
        
        .total-display {
            font-weight: bold;
            color: #5f6368;
        }
        
        /* í¼ ìŠ¤íƒ€ì¼ */
        .input-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .input-section h3 {
            color: #1a73e8;
            margin-top: 0;
            margin-bottom: 15px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            font-weight: bold;
            margin-bottom: 5px;
            color: #5f6368;
        }
        
        .form-group input, .form-group select {
            padding: 8px 12px;
            border: 1px solid #dadce0;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .btn {
            background: #1a73e8;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: background 0.3s ease;
        }
        
        .btn:hover:not(:disabled) {
            background: #1557b0;
        }
        
        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background: #5f6368;
        }
        
        .btn-secondary:hover:not(:disabled) {
            background: #3c4043;
        }
        
        .btn-export {
            background: #34a853;
        }
        
        .btn-export:hover:not(:disabled) {
            background: #2e7d32;
        }
        
        .alert {
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        
        .alert-info {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            color: #1565c0;
        }
        
        .alert-success {
            background: #e8f5e8;
            border-left: 4px solid #4caf50;
            color: #2e7d32;
        }
        
        .alert-warning {
            background: #fff3cd;
            border-left: 4px solid #ff9800;
            color: #e65100;
        }
        
        .alert-error {
            background: #ffebee;
            border-left: 4px solid #f44336;
            color: #c62828;
        }
        
        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .monthly-grid {
                grid-template-columns: 1fr;
            }
            .form-grid {
                grid-template-columns: 1fr;
            }
            .allocation-grid {
                grid-template-columns: 1fr;
            }
            .tab-container {
                flex-direction: column;
                align-items: center;
            }
            .tab {
                margin: 5px 0;
            }
            .date-selector {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª ì—°êµ¬ì†Œ ìƒ˜í”Œ í• ë‹¹ ìŠ¤ì¼€ì¤„ ì‹œìŠ¤í…œ</h1>
        <div class="subtitle">ì‹¤ì‹œê°„ ê³µìœ  ì‹œìŠ¤í…œ (Firebase)</div>
        
        <!-- Firebase ì—°ê²° ìƒíƒœ -->
        <!-- <div id="firebaseStatus" class="firebase-status firebase-loading">
            ğŸ”¥ Firebase ì—°ê²° ì¤‘...
        </div> -->
        
        <div class="mode-selector">
            <h3>ì ‘ê·¼ ëª¨ë“œ ì„ íƒ</h3>
            <button class="mode-btn active" id="viewerModeBtn">ğŸ‘ï¸ ë·°ì–´ ëª¨ë“œ (ì¼ë°˜ ì‚¬ìš©ì)</button>
            <button class="mode-btn" id="adminModeBtn">âš™ï¸ ê´€ë¦¬ì ëª¨ë“œ</button>
        </div>
        
        <div class="tab-container">
            <button class="tab active" id="calendarTab">ğŸ“… ìŠ¤ì¼€ì¤„ ë³´ê¸°</button>
            <button class="tab admin-only" id="allocationTab">ğŸ“Š í• ë‹¹ ê´€ë¦¬</button>
            <button class="tab admin-only" id="setupTab">âš™ï¸ ê¸°ë³¸ ì„¤ì •</button>
            <button class="tab admin-only" id="exportTab">ğŸ’¾ ë‚´ë³´ë‚´ê¸°</button>
        </div>
        
        <!-- ë¡œë”© í™”ë©´ -->
        <div id="loadingScreen" class="loading">
            <div class="spinner"></div>
            <p>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</p>
        </div>
        
        <!-- ìŠ¤ì¼€ì¤„ ë³´ê¸° íƒ­ (ê¸°ë³¸) -->
        <div id="calendar" class="tab-content active" style="display: none;">
            <div class="alert alert-info" id="noDataAlert">
                ê´€ë¦¬ìê°€ ìŠ¤ì¼€ì¤„ì„ ì„¤ì •í•˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
            </div>
            
            <div class="group-info" id="groupInfo" style="display: none;">
                <!-- ê·¸ë£¹ ì •ë³´ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
            
            <div class="monthly-grid" id="calendarContainer" style="display: none;">
                <!-- ìº˜ë¦°ë”ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
        </div>
        
        <!-- í• ë‹¹ ê´€ë¦¬ íƒ­ (ê´€ë¦¬ì ì „ìš©) -->
        <div id="allocation" class="tab-content">
            <div class="allocation-section">
                <h3>ğŸ“Š ì¼ì¼ ìƒ˜í”Œ í• ë‹¹ ê´€ë¦¬</h3>
                
                <div class="date-selector">
                    <label for="allocationDate">ë‚ ì§œ ì„ íƒ:</label>
                    <input type="date" id="allocationDate">
                    <button class="btn btn-secondary" id="copyPrevBtn">ì „ë‚  ë³µì‚¬</button>
                    <button class="btn" id="saveAllocationBtn">í• ë‹¹ ì €ì¥</button>
                </div>
                
                <div class="alert alert-warning" id="allocationAlert" style="display: none;">
                    ë‚ ì§œë¥¼ ì„ íƒí•˜ê³  ê° ë¶„ì„ì›ì—ê²Œ ê·¸ë£¹ë³„ ìƒ˜í”Œì„ í• ë‹¹í•˜ì„¸ìš”.
                </div>
                
                <div class="allocation-grid" id="allocationGrid">
                    <!-- í• ë‹¹ UIê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
                
                <div style="margin-top: 20px; padding: 15px; background: #e8f5e8; border-radius: 5px; display: none;" id="allocationSummary">
                    <h4>í• ë‹¹ ìš”ì•½</h4>
                    <div id="summaryContent"></div>
                </div>
            </div>
        </div>
        
        <!-- ê¸°ë³¸ ì„¤ì • íƒ­ (ê´€ë¦¬ì ì „ìš©) -->
        <div id="setup" class="tab-content">
            <div class="input-section">
                <h3>ğŸ“‹ ê¸°ë³¸ ì„¤ì •</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="startDate">ì‹œì‘ ë‚ ì§œ</label>
                        <input type="date" id="startDate" value="2025-06-01">
                    </div>
                    <div class="form-group">
                        <label for="endDate">ì¢…ë£Œ ë‚ ì§œ</label>
                        <input type="date" id="endDate" value="2025-07-31">
                    </div>
                    <div class="form-group">
                        <label for="labName">ì—°êµ¬ì†Œ/ë¶€ì„œëª…</label>
                        <input type="text" id="labName" value="ë¶„ì„ì—°êµ¬ì†Œ" placeholder="ì—°êµ¬ì†Œëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                </div>
            </div>
            
            <div class="input-section">
                <h3>ğŸ‘¥ ë¶„ì„ì› ì •ë³´</h3>
                <div class="form-grid" id="analystsGrid">
                    <div class="form-group">
                        <label>ë¶„ì„ì› 1</label>
                        <input type="text" class="analyst-name" value="ê¹€ì—°êµ¬" placeholder="ì´ë¦„">
                        <input type="text" class="analyst-emoji" value="ğŸ‘¨â€ğŸ”¬" placeholder="ì´ëª¨ì§€" style="margin-top: 5px;">
                    </div>
                    <div class="form-group">
                        <label>ë¶„ì„ì› 2</label>
                        <input type="text" class="analyst-name" value="ì´ë¶„ì„" placeholder="ì´ë¦„">
                        <input type="text" class="analyst-emoji" value="ğŸ‘©â€ğŸ”¬" placeholder="ì´ëª¨ì§€" style="margin-top: 5px;">
                    </div>
                    <div class="form-group">
                        <label>ë¶„ì„ì› 3</label>
                        <input type="text" class="analyst-name" value="ë°•ì‹¤í—˜" placeholder="ì´ë¦„">
                        <input type="text" class="analyst-emoji" value="ğŸ‘¨â€ğŸ”¬" placeholder="ì´ëª¨ì§€" style="margin-top: 5px;">
                    </div>
                    <div class="form-group">
                        <label>ë¶„ì„ì› 4</label>
                        <input type="text" class="analyst-name" value="ìµœí…ŒìŠ¤íŠ¸" placeholder="ì´ë¦„">
                        <input type="text" class="analyst-emoji" value="ğŸ‘©â€ğŸ”¬" placeholder="ì´ëª¨ì§€" style="margin-top: 5px;">
                    </div>
                </div>
            </div>
            
            <div class="input-section">
                <h3>ğŸ§ª ê·¸ë£¹ë³„ ìƒ˜í”Œ ì„¤ì •</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="group1Name">ê·¸ë£¹ 1 ì´ë¦„</label>
                        <input type="text" id="group1Name" value="#ë°•ìœ ì°½" placeholder="ê·¸ë£¹ëª…">
                    </div>
                    <div class="form-group">
                        <label for="group1Max">ê·¸ë£¹ 1 ìµœëŒ€ ìƒ˜í”Œ/ì¼</label>
                        <input type="number" id="group1Max" value="8" min="1" max="100">
                    </div>
                    <div class="form-group">
                        <label for="group1Color">ê·¸ë£¹ 1 ìƒ‰ìƒ</label>
                        <input type="color" id="group1Color" value="#ff6b6b">
                    </div>
                    <div class="form-group">
                        <label for="group2Name">ê·¸ë£¹ 2 ì´ë¦„</label>
                        <input type="text" id="group2Name" value="#ì‹ í˜„ì„" placeholder="ê·¸ë£¹ëª…">
                    </div>
                    <div class="form-group">
                        <label for="group2Max">ê·¸ë£¹ 2 ìµœëŒ€ ìƒ˜í”Œ/ì¼</label>
                        <input type="number" id="group2Max" value="8" min="1" max="100">
                    </div>
                    <div class="form-group">
                        <label for="group2Color">ê·¸ë£¹ 2 ìƒ‰ìƒ</label>
                        <input type="color" id="group2Color" value="#4834d4">
                    </div>
                    <div class="form-group">
                        <label for="group3Name">ê·¸ë£¹ 3 ì´ë¦„</label>
                        <input type="text" id="group3Name" value="#ì´ì§€í—Œ" placeholder="ê·¸ë£¹ëª…">
                    </div>
                    <div class="form-group">
                        <label for="group3Max">ê·¸ë£¹ 3 ìµœëŒ€ ìƒ˜í”Œ/ì¼</label>
                        <input type="number" id="group3Max" value="35" min="1" max="100">
                    </div>
                    <div class="form-group">
                        <label for="group3Color">ê·¸ë£¹ 3 ìƒ‰ìƒ</label>
                        <input type="color" id="group3Color" value="#00d2d3">
                    </div>
                </div>
            </div>
            
            <div class="input-section">
                <h3>ğŸ–ï¸ íœ´ê°€ ë° ê³µíœ´ì¼ ì„¤ì •</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="holidays">ê³µíœ´ì¼ (ì‰¼í‘œë¡œ êµ¬ë¶„)</label>
                        <input type="text" id="holidays" value="2025-06-06,2025-07-17" placeholder="2025-06-06,2025-07-17">
                    </div>
                </div>
                
                <div style="margin-top: 15px;">
                    <h4>ê°œë³„ íœ´ê°€ ì„¤ì •</h4>
                    <div id="vacationSettings">
                        <div class="vacation-row" style="display: flex; gap: 10px; margin-bottom: 10px; flex-wrap: wrap;">
                            <select class="vacation-analyst">
                                <option value="ê¹€ì—°êµ¬">ê¹€ì—°êµ¬</option>
                                <option value="ì´ë¶„ì„">ì´ë¶„ì„</option>
                                <option value="ë°•ì‹¤í—˜">ë°•ì‹¤í—˜</option>
                                <option value="ìµœí…ŒìŠ¤íŠ¸">ìµœí…ŒìŠ¤íŠ¸</option>
                            </select>
                            <input type="date" class="vacation-start" value="2025-06-16">
                            <input type="date" class="vacation-end" value="2025-06-17">
                            <button type="button" class="btn btn-secondary vacation-remove">ì‚­ì œ</button>
                        </div>
                        <div class="vacation-row" style="display: flex; gap: 10px; margin-bottom: 10px; flex-wrap: wrap;">
                            <select class="vacation-analyst">
                                <option value="ê¹€ì—°êµ¬">ê¹€ì—°êµ¬</option>
                                <option value="ì´ë¶„ì„" selected>ì´ë¶„ì„</option>
                                <option value="ë°•ì‹¤í—˜">ë°•ì‹¤í—˜</option>
                                <option value="ìµœí…ŒìŠ¤íŠ¸">ìµœí…ŒìŠ¤íŠ¸</option>
                            </select>
                            <input type="date" class="vacation-start" value="2025-07-21">
                            <input type="date" class="vacation-end" value="2025-07-22">
                            <button type="button" class="btn btn-secondary vacation-remove">ì‚­ì œ</button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary" id="addVacationBtn">íœ´ê°€ ì¶”ê°€</button>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" id="saveConfigBtn">ğŸ’¾ ì„¤ì • ì €ì¥</button>
                <button class="btn btn-secondary" id="resetDataBtn">ğŸ”„ ë°ì´í„° ì´ˆê¸°í™”</button>
            </div>
        </div>
        
        <!-- ë‚´ë³´ë‚´ê¸° íƒ­ (ê´€ë¦¬ì ì „ìš©) -->
        <div id="export" class="tab-content">
            <div class="input-section">
                <h3>ğŸ“¤ ë°ì´í„° ë‚´ë³´ë‚´ê¸°</h3>
                <p>ìƒì„±ëœ ìŠ¤ì¼€ì¤„ì„ ë‹¤ì–‘í•œ í˜•íƒœë¡œ ë‚´ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                
                <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px;">
                    <button class="btn btn-export" id="exportCsvBtn">ğŸ“Š CSV ë‹¤ìš´ë¡œë“œ</button>
                    <button class="btn btn-export" id="exportJsonBtn">ğŸ“‹ JSON ë‹¤ìš´ë¡œë“œ</button>
                    <button class="btn btn-export" id="printBtn">ğŸ–¨ï¸ ì¸ì‡„</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Firebase ì„¤ì • ë° ì´ˆê¸°í™”
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, doc, setDoc, getDoc, onSnapshot, collection, getDocs } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Firebase ì„¤ì • (ì´ ì„¤ì •ì€ ê³µê°œë˜ì–´ë„ ì•ˆì „í•©ë‹ˆë‹¤)
        const firebaseConfig = {
            apiKey: "AIzaSyBM3n9G_Vq4OEdm7joFZoApNu6mIKONvAM",
            authDomain: "lab-schedule-system.firebaseapp.com",
            projectId: "lab-schedule-system",
            storageBucket: "lab-schedule-system.firebasestorage.app",
            messagingSenderId: "610591324404",
            appId: "1:610591324404:web:04cc6087c8af17869c86a1"
        };

        // Firebase ì´ˆê¸°í™”
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const ADMIN_PASSWORD = "admin123"; // ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸
        let currentMode = 'viewer';
        let scheduleData = {};
        let currentConfig = {
            startDate: '2025-06-01',
            endDate: '2025-07-31',
            labName: 'ë¶„ì„ì—°êµ¬ì†Œ',
            groups: [
                { name: '#ë°•ìœ ì°½', max: 8, color: '#ff6b6b' },
                { name: '#ì‹ í˜„ì„', max: 8, color: '#4834d4' },
                { name: '#ì´ì§€í—Œ', max: 35, color: '#00d2d3' }
            ],
            analysts: [
                { name: 'ê¹€ì—°êµ¬', emoji: 'ğŸ‘¨â€ğŸ”¬' },
                { name: 'ì´ë¶„ì„', emoji: 'ğŸ‘©â€ğŸ”¬' },
                { name: 'ë°•ì‹¤í—˜', emoji: 'ğŸ‘¨â€ğŸ”¬' },
                { name: 'ìµœí…ŒìŠ¤íŠ¸', emoji: 'ğŸ‘©â€ğŸ”¬' }
            ],
            holidays: ['2025-06-06', '2025-07-17'],
            vacations: [
                { analyst: 'ê¹€ì—°êµ¬', start: '2025-06-16', end: '2025-06-17' },
                { analyst: 'ì´ë¶„ì„', start: '2025-07-21', end: '2025-07-22' }
            ]
        };

        // Firebase ì—°ê²° ìƒíƒœ ì—…ë°ì´íŠ¸
        // function updateFirebaseStatus(status, message) {
        //     const statusElement = document.getElementById('firebaseStatus');
        //     statusElement.className = `firebase-status firebase-${status}`;
            
        //     const icons = {
        //         connected: 'âœ…',
        //         disconnected: 'âŒ',
        //         loading: 'ğŸ”„'
        //     };
            
        //     statusElement.textContent = `${icons[status]} ${message}`;
        // }

        // DOM ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            setupLabScheduleApp();
        });

        // ì•± ì´ˆê¸°í™”
        async function setupLabScheduleApp() {
            try {
                // updateFirebaseStatus('loading', 'Firebase ì—°ê²° ì¤‘...');
                
                setupEventListeners();
                await loadConfigurationFromFirebase();
                await loadScheduleDataFromFirebase();
                setupRealtimeListeners();
                updateUI();
                hideLoadingScreen();
                
                // updateFirebaseStatus('connected', 'Firebase ì—°ê²°ë¨ - ì‹¤ì‹œê°„ ë™ê¸°í™” í™œì„±');
                console.log('ì•±ì´ ì„±ê³µì ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (error) {
                console.error('ì•± ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                // updateFirebaseStatus('disconnected', 'Firebase ì—°ê²° ì‹¤íŒ¨');
                showError('Firebase ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
            }
        }

        // ë¡œë”© í™”ë©´ ìˆ¨ê¸°ê¸°
        function hideLoadingScreen() {
            document.getElementById('loadingScreen').style.display = 'none';
            document.getElementById('calendar').style.display = 'block';
        }

        // ì—ëŸ¬ í‘œì‹œ
        function showError(message) {
            const alertDiv = document.createElement('div');
            alertDiv.className = 'alert alert-error';
            alertDiv.textContent = message;
            document.querySelector('.container').insertBefore(alertDiv, document.querySelector('.mode-selector'));
            
            setTimeout(() => alertDiv.remove(), 5000);
        }

        // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
        function showSuccess(message) {
            const alertDiv = document.createElement('div');
            alertDiv.className = 'alert alert-success';
            alertDiv.textContent = message;
            document.querySelector('.container').insertBefore(alertDiv, document.querySelector('.mode-selector'));
            
            setTimeout(() => alertDiv.remove(), 3000);
        }

        // Firebaseì—ì„œ ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°
        async function loadConfigurationFromFirebase() {
            try {
                const configDoc = await getDoc(doc(db, 'labSchedule', 'config'));
                if (configDoc.exists()) {
                    currentConfig = configDoc.data();
                    restoreUIData();
                }
            } catch (error) {
                console.error('ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸° ì˜¤ë¥˜:', error);
            }
        }

        // Firebaseì—ì„œ ìŠ¤ì¼€ì¤„ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
        async function loadScheduleDataFromFirebase() {
            try {
                const scheduleCollection = collection(db, 'labSchedule', 'data', 'allocations');
                const snapshot = await getDocs(scheduleCollection);
                
                scheduleData = {};
                snapshot.forEach((doc) => {
                    scheduleData[doc.id] = doc.data();
                });
            } catch (error) {
                console.error('ìŠ¤ì¼€ì¤„ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì˜¤ë¥˜:', error);
            }
        }

        // ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupRealtimeListeners() {
            // ì„¤ì • ë³€ê²½ ë¦¬ìŠ¤ë„ˆ
            onSnapshot(doc(db, 'labSchedule', 'config'), (doc) => {
                if (doc.exists()) {
                    currentConfig = doc.data();
                    restoreUIData();
                    updateUI();
                    console.log('ì„¤ì •ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.');
                }
            });

            // ìŠ¤ì¼€ì¤„ ë°ì´í„° ë³€ê²½ ë¦¬ìŠ¤ë„ˆ
            onSnapshot(collection(db, 'labSchedule', 'data', 'allocations'), (snapshot) => {
                scheduleData = {};
                snapshot.forEach((doc) => {
                    scheduleData[doc.id] = doc.data();
                });
                updateCalendarView();
                console.log('ìŠ¤ì¼€ì¤„ ë°ì´í„°ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.');
            });
        }

        // Firebaseì— ì„¤ì • ì €ì¥
        async function saveConfigurationToFirebase() {
            try {
                await setDoc(doc(db, 'labSchedule', 'config'), currentConfig);
                showSuccess('ì„¤ì •ì´ ì €ì¥ë˜ê³  ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°˜ì˜ë˜ì—ˆìŠµë‹ˆë‹¤!');
            } catch (error) {
                console.error('ì„¤ì • ì €ì¥ ì˜¤ë¥˜:', error);
                showError('ì„¤ì • ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // Firebaseì— í• ë‹¹ ë°ì´í„° ì €ì¥
        async function saveAllocationToFirebase(date, allocations) {
            try {
                await setDoc(doc(db, 'labSchedule', 'data', 'allocations', date), {
                    allocations: allocations,
                    lastUpdated: new Date().toISOString()
                });
                showSuccess('í• ë‹¹ì´ ì €ì¥ë˜ê³  ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°˜ì˜ë˜ì—ˆìŠµë‹ˆë‹¤!');
            } catch (error) {
                console.error('í• ë‹¹ ì €ì¥ ì˜¤ë¥˜:', error);
                showError('í• ë‹¹ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupEventListeners() {
            // ëª¨ë“œ ë²„íŠ¼
            document.getElementById('viewerModeBtn').addEventListener('click', () => setMode('viewer'));
            document.getElementById('adminModeBtn').addEventListener('click', () => setMode('admin'));

            // íƒ­ ë²„íŠ¼
            document.getElementById('calendarTab').addEventListener('click', () => showTab('calendar'));
            document.getElementById('allocationTab').addEventListener('click', () => showTab('allocation'));
            document.getElementById('setupTab').addEventListener('click', () => showTab('setup'));
            document.getElementById('exportTab').addEventListener('click', () => showTab('export'));

            // í• ë‹¹ ê´€ë¦¬
            document.getElementById('allocationDate').addEventListener('change', loadAllocationData);
            document.getElementById('copyPrevBtn').addEventListener('click', copyPreviousDay);
            document.getElementById('saveAllocationBtn').addEventListener('click', saveAllocation);

            // ì„¤ì • ê´€ë¦¬
            document.getElementById('saveConfigBtn').addEventListener('click', saveConfiguration);
            document.getElementById('resetDataBtn').addEventListener('click', resetData);
            document.getElementById('addVacationBtn').addEventListener('click', addVacation);

            // ë‚´ë³´ë‚´ê¸°
            document.getElementById('exportCsvBtn').addEventListener('click', exportToCSV);
            document.getElementById('exportJsonBtn').addEventListener('click', exportToJSON);
            document.getElementById('printBtn').addEventListener('click', () => window.print());

            // íœ´ê°€ ì‚­ì œ (ì´ë²¤íŠ¸ ìœ„ì„)
            document.getElementById('vacationSettings').addEventListener('click', function(e) {
                if (e.target.classList.contains('vacation-remove')) {
                    e.target.closest('.vacation-row').remove();
                }
            });
        }

        // ëª¨ë“œ ì„¤ì •
        function setMode(mode) {
            try {
                if (mode === 'admin') {
                    if (currentMode === 'admin') {
                        // ì´ë¯¸ ê´€ë¦¬ì ëª¨ë“œì´ë©´ ì¶”ê°€ ì‘ì—… ì—†ìŒ
                        return;
                    }
                    const password = prompt("ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:");
                    if (password === ADMIN_PASSWORD) {
                        currentMode = 'admin';
                        document.body.className = 'admin-mode';
                        document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
                        document.getElementById('adminModeBtn').classList.add('active');
                        // ê´€ë¦¬ì ëª¨ë“œ ì§„ì… ì‹œ ê¸°ë³¸ íƒ­ì„ ì„¤ì •í•˜ê±°ë‚˜, ë§ˆì§€ë§‰ íƒ­ì„ ìœ ì§€í•  ìˆ˜ ìˆìŒ
                        // ì—¬ê¸°ì„œëŠ” ê¸°ë³¸ìœ¼ë¡œ allocation íƒ­ì„ ë³´ì—¬ì£¼ë„ë¡ ì„¤ì •
                        showTab('allocation');
                    } else if (password !== null) { // ì‚¬ìš©ìê°€ ì·¨ì†Œë¥¼ ëˆ„ë¥´ì§€ ì•Šì•˜ì§€ë§Œ ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë¦° ê²½ìš°
                        alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                        return; // ëª¨ë“œ ë³€ê²½ ì¤‘ë‹¨
                    } else { // ì‚¬ìš©ìê°€ í”„ë¡¬í”„íŠ¸ì—ì„œ ì·¨ì†Œë¥¼ ëˆ„ë¥¸ ê²½ìš°
                        return; // ëª¨ë“œ ë³€ê²½ ì¤‘ë‹¨
                    }
                } else if (mode === 'viewer') {
                    currentMode = 'viewer';
                    document.body.className = 'viewer-mode';
                    document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
                    document.getElementById('viewerModeBtn').classList.add('active');
                    showTab('calendar');
                }
            } catch (error) {
                console.error('ëª¨ë“œ ì„¤ì • ì˜¤ë¥˜:', error);
                // ì˜¤ë¥˜ ë°œìƒ ì‹œ ì•ˆì „í•˜ê²Œ ë·°ì–´ ëª¨ë“œë¡œ ì „í™˜
                currentMode = 'viewer';
                document.body.className = 'viewer-mode';
                document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
                document.getElementById('viewerModeBtn').classList.add('active');
                showTab('calendar');
            }
        }

        // íƒ­ ì „í™˜
        function showTab(tabName) {
            try {
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                const selectedContent = document.getElementById(tabName);
                if (selectedContent) {
                    selectedContent.classList.add('active');
                }
                
                const selectedTab = document.getElementById(tabName + 'Tab');
                if (selectedTab) {
                    selectedTab.classList.add('active');
                }
                
                if (tabName === 'allocation') {
                    setupAllocationTab();
                } else if (tabName === 'calendar') {
                    updateCalendarView();
                }
            } catch (error) {
                console.error('íƒ­ ì „í™˜ ì˜¤ë¥˜:', error);
            }
        }

        // í• ë‹¹ íƒ­ ì„¤ì •
        function setupAllocationTab() {
            try {
                const dateInput = document.getElementById('allocationDate');
                if (dateInput && !dateInput.value) {
                    const today = new Date().toISOString().split('T')[0];
                    dateInput.value = today;
                }
                generateAllocationGrid();
                loadAllocationData();
            } catch (error) {
                console.error('í• ë‹¹ íƒ­ ì„¤ì • ì˜¤ë¥˜:', error);
            }
        }

        // í• ë‹¹ ê·¸ë¦¬ë“œ ìƒì„±
        function generateAllocationGrid() {
            try {
                const grid = document.getElementById('allocationGrid');
                if (!grid || !currentConfig.analysts || !currentConfig.groups) return;
                
                grid.innerHTML = '';
                
                currentConfig.analysts.forEach(analyst => {
                    const analystDiv = document.createElement('div');
                    analystDiv.className = 'analyst-allocation';
                    
                    let groupsHTML = '';
                    currentConfig.groups.forEach((group, index) => {
                        groupsHTML += `
                            <div class="group-row">
                                <div class="group-label" style="background-color: ${group.color || '#ccc'};">
                                    ${group.name || 'ê·¸ë£¹'}
                                </div>
                                <input type="number" 
                                       class="group-input" 
                                       id="${analyst.name}_${index}" 
                                       min="0" 
                                       max="${group.max || 100}" 
                                       value="0">
                                <span class="total-display">/ ${group.max || 100}</span>
                            </div>
                        `;
                    });
                    
                    analystDiv.innerHTML = `
                        <h4>${analyst.emoji || 'ğŸ‘¨â€ğŸ”¬'} ${analyst.name || 'ë¶„ì„ì›'}</h4>
                        <div class="group-allocation">
                            ${groupsHTML}
                            <div style="margin-top: 10px; padding: 10px; background: #f0f0f0; border-radius: 4px;">
                                <strong>ì´ í• ë‹¹: <span id="${analyst.name}_total">0</span>ê°œ</strong>
                            </div>
                        </div>
                    `;
                    
                    grid.appendChild(analystDiv);
                });

                // ì…ë ¥ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
                grid.addEventListener('input', updateAllocationSummary);
                grid.addEventListener('change', updateAllocationSummary);
            } catch (error) {
                console.error('í• ë‹¹ ê·¸ë¦¬ë“œ ìƒì„± ì˜¤ë¥˜:', error);
            }
        }

        // í• ë‹¹ ë°ì´í„° ë¡œë“œ
        function loadAllocationData() {
            try {
                const selectedDate = document.getElementById('allocationDate')?.value;
                if (!selectedDate) return;
                
                const isHoliday = currentConfig.holidays?.includes(selectedDate) || false;
                const dayOfWeek = new Date(selectedDate).getDay();
                const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;
                
                const alertElement = document.getElementById('allocationAlert');
                
                if (isHoliday || isWeekend) {
                    if (alertElement) {
                        alertElement.style.display = 'block';
                        alertElement.textContent = 'ì„ íƒí•œ ë‚ ì§œëŠ” ê³µíœ´ì¼ ë˜ëŠ” ì£¼ë§ì…ë‹ˆë‹¤.';
                    }
                    return;
                }
                
                const savedData = scheduleData[selectedDate];
                if (savedData && savedData.allocations && currentConfig.analysts && currentConfig.groups) {
                    currentConfig.analysts.forEach(analyst => {
                        const analystData = savedData.allocations[analyst.name];
                        if (analystData) {
                            currentConfig.groups.forEach((group, index) => {
                                const input = document.getElementById(`${analyst.name}_${index}`);
                                if (input) {
                                    input.value = analystData[group.name] || 0;
                                }
                            });
                        }
                    });
                }
                
                updateAllocationSummary();
                if (alertElement) {
                    alertElement.style.display = 'none';
                }
            } catch (error) {
                console.error('í• ë‹¹ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }

        // í• ë‹¹ ìš”ì•½ ì—…ë°ì´íŠ¸
        function updateAllocationSummary() {
            try {
                if (!currentConfig.groups || !currentConfig.analysts) return;
                
                let totalByGroup = {};
                let totalByAnalyst = {};
                
                currentConfig.groups.forEach(group => {
                    totalByGroup[group.name] = 0;
                });
                
                currentConfig.analysts.forEach(analyst => {
                    let analystTotal = 0;
                    currentConfig.groups.forEach((group, index) => {
                        const input = document.getElementById(`${analyst.name}_${index}`);
                        if (input) {
                            const value = parseInt(input.value) || 0;
                            totalByGroup[group.name] += value;
                            analystTotal += value;
                        }
                    });
                    totalByAnalyst[analyst.name] = analystTotal;
                    
                    const totalSpan = document.getElementById(`${analyst.name}_total`);
                    if (totalSpan) {
                        totalSpan.textContent = analystTotal;
                    }
                });
                
                const summaryContent = document.getElementById('summaryContent');
                const summarySection = document.getElementById('allocationSummary');
                
                if (summaryContent && summarySection) {
                    let summaryHTML = '<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">';
                    
                    // ê·¸ë£¹ë³„ ìš”ì•½
                    summaryHTML += '<div><h5>ê·¸ë£¹ë³„ í• ë‹¹</h5>';
                    currentConfig.groups.forEach(group => {
                        const percentage = ((totalByGroup[group.name] / (group.max || 1)) * 100).toFixed(1);
                        const color = percentage > 100 ? '#f44336' : percentage > 80 ? '#ff9800' : '#4caf50';
                        summaryHTML += `
                            <div style="margin-bottom: 5px;">
                                <span style="color: ${group.color || '#666'}; font-weight: bold;">${group.name}:</span> 
                                ${totalByGroup[group.name]}/${group.max || 0} 
                                <span style="color: ${color};">(${percentage}%)</span>
                            </div>
                        `;
                    });
                    summaryHTML += '</div>';
                    
                    // ë¶„ì„ì›ë³„ ìš”ì•½
                    summaryHTML += '<div><h5>ë¶„ì„ì›ë³„ í• ë‹¹</h5>';
                    currentConfig.analysts.forEach(analyst => {
                        summaryHTML += `
                            <div style="margin-bottom: 5px;">
                                ${analyst.emoji || 'ğŸ‘¨â€ğŸ”¬'} <strong>${analyst.name}:</strong> ${totalByAnalyst[analyst.name] || 0}ê°œ
                            </div>
                        `;
                    });
                    summaryHTML += '</div></div>';
                    
                    summaryContent.innerHTML = summaryHTML;
                    summarySection.style.display = 'block';
                }
            } catch (error) {
                console.error('í• ë‹¹ ìš”ì•½ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
            }
        }

        // í• ë‹¹ ì €ì¥ (Firebase)
        async function saveAllocation() {
            try {
                const selectedDate = document.getElementById('allocationDate').value;
                if (!selectedDate) {
                    showError('ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                const allocations = {};
                
                currentConfig.analysts.forEach(analyst => {
                    allocations[analyst.name] = {};
                    currentConfig.groups.forEach((group, index) => {
                        const input = document.getElementById(`${analyst.name}_${index}`);
                        if (input) {
                            allocations[analyst.name][group.name] = parseInt(input.value) || 0;
                        }
                    });
                });
                
                // Firebaseì— ì €ì¥
                await saveAllocationToFirebase(selectedDate, allocations);
                
                // ë¡œì»¬ ë°ì´í„°ë„ ì—…ë°ì´íŠ¸
                if (!scheduleData[selectedDate]) {
                    scheduleData[selectedDate] = {};
                }
                scheduleData[selectedDate].allocations = allocations;
                
                updateCalendarView();
            } catch (error) {
                console.error('í• ë‹¹ ì €ì¥ ì˜¤ë¥˜:', error);
                showError('í• ë‹¹ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ì „ë‚  ë³µì‚¬
        function copyPreviousDay() {
            try {
                const selectedDate = document.getElementById('allocationDate').value;
                if (!selectedDate) {
                    showError('ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                const prevDate = new Date(selectedDate);
                prevDate.setDate(prevDate.getDate() - 1);
                const prevDateStr = prevDate.toISOString().split('T')[0];
                
                const prevData = scheduleData[prevDateStr];
                if (prevData && prevData.allocations) {
                    currentConfig.analysts.forEach(analyst => {
                        const analystData = prevData.allocations[analyst.name];
                        if (analystData) {
                            currentConfig.groups.forEach((group, index) => {
                                const input = document.getElementById(`${analyst.name}_${index}`);
                                if (input) {
                                    input.value = analystData[group.name] || 0;
                                }
                            });
                        }
                    });
                    updateAllocationSummary();
                    showSuccess(`${prevDateStr} ë°ì´í„°ë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.`);
                } else {
                    showError('ì „ë‚  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('ì „ë‚  ë³µì‚¬ ì˜¤ë¥˜:', error);
                showError('ì „ë‚  ë°ì´í„° ë³µì‚¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // UI ì—…ë°ì´íŠ¸
        function updateUI() {
            updateGroupInfo();
            updateCalendarView();
        }

        // ê·¸ë£¹ ì •ë³´ ì—…ë°ì´íŠ¸
        function updateGroupInfo() {
            try {
                const groupInfo = document.getElementById('groupInfo');
                if (!currentConfig.groups || currentConfig.groups.length === 0) {
                    groupInfo.style.display = 'none';
                    return;
                }
                
                groupInfo.style.display = 'grid';
                groupInfo.innerHTML = '';
                
                currentConfig.groups.forEach(group => {
                    const card = document.createElement('div');
                    card.className = 'group-card';
                    card.style.background = `linear-gradient(135deg, ${group.color} 0%, ${group.color}dd 100%)`;
                    card.innerHTML = `
                        <h3>${group.name}</h3>
                        <div class="max-count">ìµœëŒ€ ${group.max}ê°œ</div>
                        <div class="label">ì¼ì¼ ìµœëŒ€ ìƒ˜í”Œ ìˆ˜</div>
                    `;
                    groupInfo.appendChild(card);
                });
            } catch (error) {
                console.error('ê·¸ë£¹ ì •ë³´ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
            }
        }

        // ìº˜ë¦°ë” ë·° ì—…ë°ì´íŠ¸
        function updateCalendarView() {
            try {
                const container = document.getElementById('calendarContainer');
                const noDataAlert = document.getElementById('noDataAlert');
                
                if (!currentConfig.startDate || !currentConfig.endDate) {
                    container.style.display = 'none';
                    noDataAlert.style.display = 'block';
                    return;
                }
                
                noDataAlert.style.display = 'none';
                container.style.display = 'grid';
                container.innerHTML = '';
                
                const start = new Date(currentConfig.startDate);
                const end = new Date(currentConfig.endDate);
                
                const months = getMonthsInRange(start, end);
                
                Object.keys(months).forEach(monthKey => {
                    const monthContainer = document.createElement('div');
                    monthContainer.className = 'month-container';
                    
                    const [year, month] = monthKey.split('-');
                    const monthNames = ['1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”', '7ì›”', '8ì›”', '9ì›”', '10ì›”', '11ì›”', '12ì›”'];
                    
                    monthContainer.innerHTML = `
                        <div class="month-header">ğŸ“… ${year}ë…„ ${monthNames[parseInt(month) - 1]}</div>
                        <div class="calendar">
                            <div class="day-header">ì¼</div>
                            <div class="day-header">ì›”</div>
                            <div class="day-header">í™”</div>
                            <div class="day-header">ìˆ˜</div>
                            <div class="day-header">ëª©</div>
                            <div class="day-header">ê¸ˆ</div>
                            <div class="day-header">í† </div>
                            ${generateMonthCalendar(parseInt(year), parseInt(month) - 1)}
                        </div>
                    `;
                    
                    container.appendChild(monthContainer);
                });
            } catch (error) {
                console.error('ìº˜ë¦°ë” ë·° ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
            }
        }

        // ì›” ë²”ìœ„ ê³„ì‚°
        function getMonthsInRange(start, end) {
            const months = {};
            for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {
                const monthKey = `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}`;
                if (!months[monthKey]) {
                    months[monthKey] = [];
                }
                months[monthKey].push(new Date(d));
            }
            return months;
        }

        // ì›”ë³„ ìº˜ë¦°ë” HTML ìƒì„±
        function generateMonthCalendar(year, month) {
            try {
                const firstDay = new Date(year, month, 1);
                const startDate = new Date(firstDay);
                startDate.setDate(startDate.getDate() - firstDay.getDay());
                
                let html = '';
                
                for (let i = 0; i < 42; i++) {
                    const currentDate = new Date(startDate);
                    currentDate.setDate(startDate.getDate() + i);
                    
                    const dateStr = currentDate.toISOString().split('T')[0];
                    const isCurrentMonth = currentDate.getMonth() === month;
                    
                    const localYear = currentDate.getFullYear();
                    const localMonth = String(currentDate.getMonth() + 1).padStart(2, '0');
                    const localDay = String(currentDate.getDate()).padStart(2, '0');
                    const localDateStringForComparison = `${localYear}-${localMonth}-${localDay}`;

                    let cellClass = 'day-cell';
                    let cellContent = '';
                    
                    if (!isCurrentMonth) {
                        // For days not in the current month, usually just a number is shown and they might look like weekends.
                        // The original logic applied 'weekend' class to all out-of-month days.
                        // We can keep them visually distinct or apply specific styling if needed.
                        // For now, let's ensure they get a base style, and weekend styling if they are actual weekends.
                        if (currentDate.getDay() === 0 || currentDate.getDay() === 6) {
                            cellClass += ' weekend';
                        }
                        cellContent = `<div class="day-number">${currentDate.getDate()}</div>`;
                    } else {
                        cellContent = generateDayContent(currentDate, dateStr); // dateStr (UTC) is for data, generateDayContent uses local for display text
                        
                        // Apply base styling for current month days
                        // Weekend check
                        if (currentDate.getDay() === 0 || currentDate.getDay() === 6) {
                            cellClass += ' weekend';
                        }

                        // Holiday check - takes precedence for background if it's also a weekend
                        let isHoliday = currentConfig.holidays?.includes(localDateStringForComparison);
                        if (isHoliday) {
                            cellClass += ' holiday'; // Applies gray background and red text
                        }

                        // Vacation check - applies vacation background only if not a holiday
                        let isVacation = currentConfig.vacations?.some(v => v.start <= localDateStringForComparison && localDateStringForComparison <= v.end);
                        if (isVacation && !isHoliday) {
                            cellClass += ' vacation';
                        }
                    }
                    
                    html += `<div class="${cellClass}">${cellContent}</div>`;
                }
                
                return html;
            } catch (error) {
                console.error('ì›”ë³„ ìº˜ë¦°ë” ìƒì„± ì˜¤ë¥˜:', error);
                return '';
            }
        }

        // ì¼ë³„ ë‚´ìš© ìƒì„±
        function generateDayContent(date, dateStr) {
            try {
                const localYear = date.getFullYear();
                const localMonth = String(date.getMonth() + 1).padStart(2, '0'); // Months are 0-indexed
                const localDay = String(date.getDate()).padStart(2, '0');
                const localDateStringForComparison = `${localYear}-${localMonth}-${localDay}`;

                let content = `<div class="day-number">${date.getDate()}</div>`;
                
                if (currentConfig.holidays?.includes(localDateStringForComparison)) {
                    content += '<div style="font-size: 9px; color: #d32f2f;">ê³µíœ´ì¼</div>';
                    // If other markers can co-exist with holidays, don't return here.
                    // Based on original logic, holiday display was exclusive for its main text.
                    // We might still want to show allocations even on a holiday.
                    // For now, let's allow other content to be added after "ê³µíœ´ì¼".
                }
                
                // Weekends might still have vacations or allocations, so don't return immediately.
                // The styling for .weekend class handles the visual distinction.

                const vacationAnalyst = currentConfig.vacations?.find(v => 
                    v.start <= localDateStringForComparison && localDateStringForComparison <= v.end
                );
                if (vacationAnalyst) {
                    content += `<div style="font-size: 9px; color: #f57c00;">${vacationAnalyst.analyst} íœ´ê°€</div>`;
                }
                
                // Note: dayData is still fetched using dateStr (UTC string) as keys are stored this way.
                const dayData = scheduleData[dateStr];
                if (dayData && dayData.allocations) {
                    content += '<div class="group-samples">';
                    
                    currentConfig.groups.forEach(group => {
                        let groupTotal = 0;
                        Object.values(dayData.allocations).forEach(analystAlloc => {
                            groupTotal += analystAlloc[group.name] || 0;
                        });
                        
                        if (groupTotal > 0) {
                            content += `<span class="group-tag" style="background: ${group.color};">${group.name.replace('#', '')}${groupTotal}</span>`;
                        }
                    });
                    
                    content += '</div>';

                    // Analyst-specific counts
                    if (currentConfig.analysts && currentConfig.analysts.length > 0) {
                        currentConfig.analysts.forEach(analyst => {
                            if (dayData.allocations[analyst.name]) {
                                const analystTotal = Object.values(dayData.allocations[analyst.name]).reduce((sum, count) => sum + (count || 0), 0);
                                if (analystTotal > 0) {
                                    content += `<div style="font-size: 9px; margin-top: 3px; color: #333;">${analyst.emoji || 'ğŸ‘¤'} ${analyst.name}: ${analystTotal}ê°œ</div>`;
                                }
                            }
                        });
                    }
                }
                
                return content;
            } catch (error) {
                console.error('ì¼ë³„ ë‚´ìš© ìƒì„± ì˜¤ë¥˜:', error);
                return `<div class="day-number">${date.getDate()}</div>`;
            }
        }

        // ì„¤ì • ì €ì¥ (Firebase)
        async function saveConfiguration() {
            try {
                // UIì—ì„œ ë°ì´í„° ìˆ˜ì§‘
                currentConfig.startDate = document.getElementById('startDate').value;
                currentConfig.endDate = document.getElementById('endDate').value;
                currentConfig.labName = document.getElementById('labName').value;
                
                currentConfig.groups = [
                    {
                        name: document.getElementById('group1Name').value,
                        max: parseInt(document.getElementById('group1Max').value),
                        color: document.getElementById('group1Color').value
                    },
                    {
                        name: document.getElementById('group2Name').value,
                        max: parseInt(document.getElementById('group2Max').value),
                        color: document.getElementById('group2Color').value
                    },
                    {
                        name: document.getElementById('group3Name').value,
                        max: parseInt(document.getElementById('group3Max').value),
                        color: document.getElementById('group3Color').value
                    }
                ];
                
                const analystNames = document.querySelectorAll('.analyst-name');
                const analystEmojis = document.querySelectorAll('.analyst-emoji');
                currentConfig.analysts = [];
                for (let i = 0; i < analystNames.length; i++) {
                    if (analystNames[i].value) {
                        currentConfig.analysts.push({
                            name: analystNames[i].value,
                            emoji: analystEmojis[i].value || 'ğŸ‘¨â€ğŸ”¬'
                        });
                    }
                }
                
                currentConfig.holidays = document.getElementById('holidays').value
                    .split(',')
                    .map(d => d.trim())
                    .filter(d => d);
                
                currentConfig.vacations = [];
                const vacationRows = document.querySelectorAll('.vacation-row');
                vacationRows.forEach(row => {
                    const analyst = row.querySelector('.vacation-analyst')?.value;
                    const start = row.querySelector('.vacation-start')?.value;
                    const end = row.querySelector('.vacation-end')?.value;
                    if (analyst && start && end) {
                        currentConfig.vacations.push({ analyst, start, end });
                    }
                });
                
                // Firebaseì— ì €ì¥
                await saveConfigurationToFirebase();
                updateUI();
            } catch (error) {
                console.error('ì„¤ì • ì €ì¥ ì˜¤ë¥˜:', error);
                showError('ì„¤ì • ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // UI ë°ì´í„° ë³µì›
        function restoreUIData() {
            try {
                const elements = {
                    startDate: document.getElementById('startDate'),
                    endDate: document.getElementById('endDate'),
                    labName: document.getElementById('labName'),
                    group1Name: document.getElementById('group1Name'),
                    group1Max: document.getElementById('group1Max'),
                    group1Color: document.getElementById('group1Color'),
                    group2Name: document.getElementById('group2Name'),
                    group2Max: document.getElementById('group2Max'),
                    group2Color: document.getElementById('group2Color'),
                    group3Name: document.getElementById('group3Name'),
                    group3Max: document.getElementById('group3Max'),
                    group3Color: document.getElementById('group3Color'),
                    holidays: document.getElementById('holidays')
                };

                if (elements.startDate) elements.startDate.value = currentConfig.startDate || '2025-06-01';
                if (elements.endDate) elements.endDate.value = currentConfig.endDate || '2025-07-31';
                if (elements.labName) elements.labName.value = currentConfig.labName || 'ë¶„ì„ì—°êµ¬ì†Œ';

                if (currentConfig.groups && currentConfig.groups.length >= 3) {
                    if (elements.group1Name) elements.group1Name.value = currentConfig.groups[0].name || '#ë°•ìœ ì°½';
                    if (elements.group1Max) elements.group1Max.value = currentConfig.groups[0].max || 8;
                    if (elements.group1Color) elements.group1Color.value = currentConfig.groups[0].color || '#ff6b6b';
                    
                    if (elements.group2Name) elements.group2Name.value = currentConfig.groups[1].name || '#ì‹ í˜„ì„';
                    if (elements.group2Max) elements.group2Max.value = currentConfig.groups[1].max || 8;
                    if (elements.group2Color) elements.group2Color.value = currentConfig.groups[1].color || '#4834d4';
                    
                    if (elements.group3Name) elements.group3Name.value = currentConfig.groups[2].name || '#ì´ì§€í—Œ';
                    if (elements.group3Max) elements.group3Max.value = currentConfig.groups[2].max || 35;
                    if (elements.group3Color) elements.group3Color.value = currentConfig.groups[2].color || '#00d2d3';
                }

                const analystNames = document.querySelectorAll('.analyst-name');
                const analystEmojis = document.querySelectorAll('.analyst-emoji');
                if (currentConfig.analysts) {
                    currentConfig.analysts.forEach((analyst, index) => {
                        if (analystNames[index]) {
                            analystNames[index].value = analyst.name;
                            analystEmojis[index].value = analyst.emoji;
                        }
                    });
                }

                if (elements.holidays && currentConfig.holidays) {
                    elements.holidays.value = currentConfig.holidays.join(',');
                }

                // íœ´ê°€ ì„¤ì • ë³µì›
                const vacationSettingsDiv = document.getElementById('vacationSettings');
                if (vacationSettingsDiv) {
                    vacationSettingsDiv.innerHTML = ''; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”
                    if (currentConfig.vacations && Array.isArray(currentConfig.vacations)) {
                        currentConfig.vacations.forEach(vacationItem => {
                            const vacationRow = document.createElement('div');
                            vacationRow.className = 'vacation-row';
                            vacationRow.style.cssText = 'display: flex; gap: 10px; margin-bottom: 10px; flex-wrap: wrap;';

                            let analystOptionsHTML = '';
                            if (currentConfig.analysts && typeof currentConfig.analysts.forEach === 'function') {
                                currentConfig.analysts.forEach(analyst => {
                                    const isSelected = analyst.name === vacationItem.analyst ? 'selected' : '';
                                    analystOptionsHTML += `<option value="${analyst.name}" ${isSelected}>${analyst.name}</option>`;
                                });
                            }

                            vacationRow.innerHTML = `
                                <select class="vacation-analyst">${analystOptionsHTML}</select>
                                <input type="date" class="vacation-start" value="${vacationItem.start || ''}">
                                <input type="date" class="vacation-end" value="${vacationItem.end || ''}">
                                <button type="button" class="btn btn-secondary vacation-remove">ì‚­ì œ</button>
                            `;
                            vacationSettingsDiv.appendChild(vacationRow);
                        });
                    }
                }
            } catch (error) {
                console.error('UI ë°ì´í„° ë³µì› ì˜¤ë¥˜:', error);
            }
        }

        // íœ´ê°€ ì¶”ê°€
        function addVacation() {
            try {
                const vacationSettings = document.getElementById('vacationSettings');
                const newVacation = document.createElement('div');
                newVacation.className = 'vacation-row';
                newVacation.style.cssText = 'display: flex; gap: 10px; margin-bottom: 10px; flex-wrap: wrap;';
                
                let analystOptions = '';
                currentConfig.analysts.forEach(analyst => {
                    analystOptions += `<option value="${analyst.name}">${analyst.name}</option>`;
                });
                
                newVacation.innerHTML = `
                    <select class="vacation-analyst">
                        ${analystOptions}
                    </select>
                    <input type="date" class="vacation-start">
                    <input type="date" class="vacation-end">
                    <button type="button" class="btn btn-secondary vacation-remove">ì‚­ì œ</button>
                `;
                vacationSettings.appendChild(newVacation);
            } catch (error) {
                console.error('íœ´ê°€ ì¶”ê°€ ì˜¤ë¥˜:', error);
            }
        }

        // ë°ì´í„° ì´ˆê¸°í™” (Firebase)
        async function resetData() {
            if (confirm('ëª¨ë“  ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìœ¼ë©° ëª¨ë“  ì‚¬ìš©ìì˜ ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤.')) {
                try {
                    // Firebase ë°ì´í„° ì´ˆê¸°í™”
                    await setDoc(doc(db, 'labSchedule', 'config'), {
                        startDate: '2025-06-01',
                        endDate: '2025-07-31',
                        labName: 'ë¶„ì„ì—°êµ¬ì†Œ',
                        groups: [
                            { name: '#ë°•ìœ ì°½', max: 8, color: '#ff6b6b' },
                            { name: '#ì‹ í˜„ì„', max: 8, color: '#4834d4' },
                            { name: '#ì´ì§€í—Œ', max: 35, color: '#00d2d3' }
                        ],
                        analysts: [
                            { name: 'ê¹€ì—°êµ¬', emoji: 'ğŸ‘¨â€ğŸ”¬' },
                            { name: 'ì´ë¶„ì„', emoji: 'ğŸ‘©â€ğŸ”¬' },
                            { name: 'ë°•ì‹¤í—˜', emoji: 'ğŸ‘¨â€ğŸ”¬' },
                            { name: 'ìµœí…ŒìŠ¤íŠ¸', emoji: 'ğŸ‘©â€ğŸ”¬' }
                        ],
                        holidays: ['2025-06-06', '2025-07-17'],
                        vacations: [
                            { analyst: 'ê¹€ì—°êµ¬', start: '2025-06-16', end: '2025-06-17' },
                            { analyst: 'ì´ë¶„ì„', start: '2025-07-21', end: '2025-07-22' }
                        ]
                    });
                    
                    // í• ë‹¹ ë°ì´í„° ì»¬ë ‰ì…˜ ì‚­ì œëŠ” ì§ì ‘ì ìœ¼ë¡œ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ
                    // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ë§Œ í‘œì‹œ
                    showSuccess('ì„¤ì •ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. í• ë‹¹ ë°ì´í„°ëŠ” ìˆ˜ë™ìœ¼ë¡œ ê´€ë¦¬í•´ì£¼ì„¸ìš”.');
                    
                    location.reload();
                } catch (error) {
                    console.error('ë°ì´í„° ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                    showError('ë°ì´í„° ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }
        }

        // CSV ë‚´ë³´ë‚´ê¸°
        function exportToCSV() {
            try {
                if (!scheduleData || Object.keys(scheduleData).length === 0) {
                    showError('ë‚´ë³´ë‚¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }
                
                let csv = 'ë‚ ì§œ,ìš”ì¼';
                currentConfig.groups.forEach(group => {
                    csv += `,${group.name}`;
                });
                currentConfig.analysts.forEach(analyst => {
                    csv += `,${analyst.name}`;
                });
                csv += '\n';
                
                const start = new Date(currentConfig.startDate);
                const end = new Date(currentConfig.endDate);
                
                for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {
                    const dateStr = d.toISOString().split('T')[0];
                    const dayOfWeek = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '][d.getDay()];
                    
                    csv += `${dateStr},${dayOfWeek}`;
                    
                    const dayData = scheduleData[dateStr];
                    
                    currentConfig.groups.forEach(group => {
                        let groupTotal = 0;
                        if (dayData && dayData.allocations) {
                            Object.values(dayData.allocations).forEach(analystAlloc => {
                                groupTotal += analystAlloc[group.name] || 0;
                            });
                        }
                        csv += `,${groupTotal}`;
                    });
                    
                    currentConfig.analysts.forEach(analyst => {
                        let analystTotal = 0;
                        if (dayData && dayData.allocations && dayData.allocations[analyst.name]) {
                            analystTotal = Object.values(dayData.allocations[analyst.name]).reduce((sum, val) => sum + (val || 0), 0);
                        }
                        csv += `,${analystTotal}`;
                    });
                    
                    csv += '\n';
                }
                
                downloadFile(csv, 'lab_schedule.csv', 'text/csv');
                showSuccess('CSV íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (error) {
                console.error('CSV ë‚´ë³´ë‚´ê¸° ì˜¤ë¥˜:', error);
                showError('CSV ë‚´ë³´ë‚´ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // JSON ë‚´ë³´ë‚´ê¸°
        function exportToJSON() {
            try {
                const exportData = {
                    config: currentConfig,
                    scheduleData: scheduleData,
                    exported: new Date().toISOString()
                };
                
                downloadFile(JSON.stringify(exportData, null, 2), 'lab_schedule.json', 'application/json');
                showSuccess('JSON íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (error) {
                console.error('JSON ë‚´ë³´ë‚´ê¸° ì˜¤ë¥˜:', error);
                showError('JSON ë‚´ë³´ë‚´ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // íŒŒì¼ ë‹¤ìš´ë¡œë“œ
        function downloadFile(content, filename, mimeType) {
            try {
                const blob = new Blob([content], { type: mimeType });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                a.click();
                URL.revokeObjectURL(url);
            } catch (error) {
                console.error('íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜:', error);
                showError('íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

    </script>
</body>
</html>

<!-- Firebase í”„ë¡œì íŠ¸ ì„¤ì • ê°€ì´ë“œ -->
<!--
ğŸ”¥ Firebase ì„¤ì • ë°©ë²•:

1. Firebase Console ì ‘ì†
   - https://console.firebase.google.com/ ì ‘ì†
   - "í”„ë¡œì íŠ¸ ì¶”ê°€" í´ë¦­

2. í”„ë¡œì íŠ¸ ìƒì„±
   - í”„ë¡œì íŠ¸ ì´ë¦„: lab-schedule-system
   - Google ì• ë„ë¦¬í‹±ìŠ¤: ë¹„í™œì„±í™” (ì„ íƒì‚¬í•­)
   - í”„ë¡œì íŠ¸ ë§Œë“¤ê¸° í´ë¦­

3. ì›¹ ì•± ì¶”ê°€
   - í”„ë¡œì íŠ¸ ê°œìš”ì—ì„œ ì›¹ ì•„ì´ì½˜(</>) í´ë¦­
   - ì•± ë‹‰ë„¤ì„: ì—°êµ¬ì†Œ ìŠ¤ì¼€ì¤„ ì‹œìŠ¤í…œ
   - Firebase í˜¸ìŠ¤íŒ…: ì²´í¬ (ì„ íƒì‚¬í•­)
   - ì•± ë“±ë¡ í´ë¦­

4. Firebase ì„¤ì • ë³µì‚¬
   - ìƒì„±ëœ firebaseConfig ê°ì²´ë¥¼ ìœ„ ì½”ë“œì˜ firebaseConfigì— êµì²´

5. Firestore ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
   - ì™¼ìª½ ë©”ë‰´ì—ì„œ "Firestore Database" í´ë¦­
   - ë°ì´í„°ë² ì´ìŠ¤ ë§Œë“¤ê¸°
   - í”„ë¡œë•ì…˜ ëª¨ë“œë¡œ ì‹œì‘
   - ìœ„ì¹˜: asia-northeast3 (ì„œìš¸) ì„ íƒ

6. ë³´ì•ˆ ê·œì¹™ ì„¤ì •
   rules_version = '2';
   service cloud.firestore {
     match /databases/{database}/documents {
       match /{document=**} {
         allow read, write: if true;
       }
     }
   }

7. ì›¹ í˜¸ìŠ¤íŒ… ì„¤ì • (ì„ íƒì‚¬í•­)
   - ì™¼ìª½ ë©”ë‰´ì—ì„œ "Hosting" í´ë¦­
   - ì‹œì‘í•˜ê¸° í´ë¦­
   - Firebase CLI ì„¤ì¹˜ ë° ë°°í¬

ğŸš€ ì‚¬ìš©ë²•:
1. ìœ„ HTML íŒŒì¼ì„ index.htmlë¡œ ì €ì¥
2. firebaseConfig êµì²´
3. GitHub Pages ë˜ëŠ” Firebase Hostingì— ë°°í¬
4. ê´€ë¦¬ìê°€ ì„¤ì • ì…ë ¥ â†’ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ë°˜ì˜
5. í• ë‹¹ ê´€ë¦¬ â†’ ì‹¤ì‹œê°„ ë™ê¸°í™”

âœ… ì£¼ìš” ê¸°ëŠ¥:
- âœ… ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™”
- âœ… í´ë¼ìš°ë“œ ì €ì¥ (ë°ì´í„° ì†ì‹¤ ë°©ì§€)
- âœ… ì—¬ëŸ¬ ê¸°ê¸°ì—ì„œ ë™ì‹œ ì ‘ì†
- âœ… ê´€ë¦¬ì/ë·°ì–´ ëª¨ë“œ êµ¬ë¶„
- âœ… ë¬´ë£Œ ì‚¬ìš© (Firebase Spark í”Œëœ)
- âœ… ëª¨ë°”ì¼ ìµœì í™”
-->

<!-- Firebase ë³´ì•ˆ ê·œì¹™ (Firestore Rules) -->
<!--
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ì½ê¸°/ì“°ê¸° ê¶Œí•œ í—ˆìš© (ê°„ë‹¨í•œ ì„¤ì •)
    match /{document=**} {
      allow read, write: if true;
    }
    
    // ë” ì•ˆì „í•œ ì„¤ì • (ì¶”ì²œ)
    match /labSchedule/{document} {
      allow read: if true;  // ëª¨ë“  ì‚¬ìš©ì ì½ê¸° ê°€ëŠ¥
      allow write: if true; // í˜„ì¬ëŠ” ëª¨ë“  ì‚¬ìš©ì ì“°ê¸° ê°€ëŠ¥
                           // ë‚˜ì¤‘ì— ì¸ì¦ ì‹œìŠ¤í…œ ì¶”ê°€ ì‹œ ì œí•œ ê°€ëŠ¥
    }
  }
}
-->